{% extends "Partie_admin/Shared/base.html.twig" %}

{% block title %}Messagerie
{% endblock %}

{% block body %}

	<section class="container">
		<div class="row">
			<div class="col">
				<h1>Envoyer un message</h1>	

				<div class="card-body">

				<div class="col-md-9">
            
            <!-- /.card -->
          </div>




				<form action="" method="POST">
					
					<div class="form-group">
						<label for="titre">Titre</label>
						<input type="text" class="form-control" id="titre"  name="titre"  placeholder="Saisir le titre" required>
					</div>
					<div class="form-group">
						<label for="message">Motif</label>
						<div class="form-group green-border-focus">
  						<textarea class="form-control" id="message" name="message" rows="3"></textarea>
					</div>
					</div>
					


					{% if app.request.attributes.get('_route') == 'envoyer_message' %}

					

					<input type="text" class="form-control" id="admin_user"  value="{{ miniplan.getUser().getId() }}" name="admin_user"  placeholder="Saisir le titre"  hidden  required>

					{# <div class="form-group row" hidden>
							<label for="lname" class="col-sm-3 text-right control-label col-form-label">Destinnataire</label>
							<div class="col-sm-9">
								{{ form_widget(form.recipient, {'attr': {'class': 'form-control' }} ) }}
							</div>
						</div>	 #}

					{% elseif app.request.attributes.get('_route') == 'send' %} 
					   				 
						{# <div class="form-group row">
							<label for="lname" class="col-sm-3 text-right control-label col-form-label">Destinnataire</label>
							<div class="col-sm-9">
							{{ form_widget(form.recipient, {'attr': {'class': 'form-control' }} ) }}
								
							</div>
						</div>	 #}

						<select class="browser-default custom-select"  id="adminlist" name="adminlist">
						{% for liste_admin in liste_admin %}

							<option value="{{liste_admin.getId()}}">{{liste_admin.getEmail()}}</option>
						{% endfor %}
							
						</select>						
					   
					{% endif %}     
				
		
					<button type="submit" class="btn btn-primary">Envoyer</button>
				</form>






				{# {{ form_start(form) }} #}

					
					{# <div class="form-group row">
						<label for="fname" class="col-sm-3 text-right control-label col-form-label">
							Titre														
											
						</label>
						<div class="col-sm-9">
							{{ form_widget(form.titre, {'attr': {'class': 'form-control', 'placeholder': 'Saisir le titre de l\'article' }}) }}
						</div>
						</div>
						<div class="form-group row">
							<label for="lname" class="col-sm-3 text-right control-label col-form-label">Contenu</label>
							<div class="col-sm-9">
								{{ form_widget(form.message, {'attr': {'class': 'form-control'}}) }}                    
							</div>
						</div>
						{% if app.request.attributes.get('_route') == 'envoyer_message' %}

						<div class="form-group row" hidden>
							<label for="lname" class="col-sm-3 text-right control-label col-form-label">Destinnataire</label>
							<div class="col-sm-9">
								{{ form_widget(form.recipient, {'attr': {'class': 'form-control' }} ) }}
							</div>
						</div>	
			   
						
						{% elseif app.request.attributes.get('_route') == 'send' %} 
					   				 
						<div class="form-group row">
							<label for="lname" class="col-sm-3 text-right control-label col-form-label">Destinnataire</label>
							<div class="col-sm-9">
							{{ form_widget(form.recipient, {'attr': {'class': 'form-control' }} ) }}
								
							</div>
						</div>	

						<select class="browser-default custom-select"  id="adminlist" name="adminlist">
						{% for liste_admin in liste_admin %}

							<option value="{{liste_admin.getId()}}">{{liste_admin.getEmail()}}</option>
						{% endfor %}
							
						</select>

						
					   
					   {% endif %}     
				
		
					</div> #}
						
					
				</div>
					        
					
		

					


				<a class="btn btn-primary" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
					Voir mes dossiers
				</a>
			</div>
		</div>
		</div>
		{# {{ form_end(form) }} #}
	</div>
		</div>
		</div>
	</div>

		</div>
	</section>
	<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
		<div class="offcanvas-header">
			<h2 class="offcanvas-title" id="offcanvasExampleLabel">Mes dossiers</h2>
			<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
            <div class="list-group">
                <a href="{{ path("message") }}" class="list-group-item list-group-item-action">Accueil</a>
            </div>
            <div class="list-group">
                <a href="{{ path("message") }}" class="list-group-item list-group-item-action">Boîte de réception</a>
            </div>
            <div class="list-group">
                <a href="{{ path("message") }}" class="list-group-item list-group-item-action">Eléments envoyés</a>
            </div>
		</div>
	</div>
{% endblock %}
